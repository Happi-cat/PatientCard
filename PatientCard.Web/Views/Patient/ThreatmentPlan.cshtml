@model IList<PatientCard.Core.Models.ThreatmentOption>
<div class="container" ng-controller="PatientThreatmentPlanCtrl">
	<ng-include src="'/Widget/Breadcrumb'"></ng-include>
	<div class="page-header">
		<h3>План лечения</h3>
	</div>
	@if (true == ViewBag.View)
 {

	 <dl>
		 <dt ng-repeat-start="item in threatmentPlan | orderBy:['group','order'] ">
			 <label class="col-sm-1 control-label" ng-if="!item.order">{{ item.group }}</label>
			 <div class="col-sm-11" ng-class="{ 'col-sm-offset-1' : item.order }">
				 <label class="control-label">{{ item.name }}</label>
			 </div>
		 </dt>
		 <dd ng-repeat-end>
			 <div class="col-sm-offset-1 col-sm-11">
				 {{ item.description }}
			 </div>
		 </dd>
	 </dl>
	 <div class="clearfix bottom-padding"></div>
		<div class="row">
			<div class="col-sm-offset-1 col-sm-11">
				<a href="#!/patient/edit/{{ patientId }}/threatment-plan" class="btn btn-primary"><span class="glyphicon glyphicon-pencil"></span>&nbsp;Заполнить форму</a>
			</div>
		</div>
 }
 else
 {

		<form name="threatmentPlanForm" class="form-horizontal" role="form">
			<div class="form-group" ng-repeat="item in threatmentPlan | orderBy:['group','order'] ">
				<label class="col-sm-1 control-label" ng-if="!item.order">{{ item.group }}</label>
				<div class="col-sm-11" ng-class="{ 'col-sm-offset-1' : item.order }">
					<label class="control-label">{{ item.name }}</label>
					<input type="text" class="form-control" name="description{{ item.threatmentOptionId }}" ng-model="item.description">
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-1 col-sm-11">
					<button class="btn btn-primary" ng-click="ok()"><span class="glyphicon glyphicon-floppy-disk"></span>&nbsp;Сохранить</button>
					<button class="btn btn-default" ng-click="cancel()"><span class="glyphicon glyphicon-remove"></span>&nbsp;Отмена</button>
				</div>
			</div>
		</form>
 }

</div>
